<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lovasj√°r√°s - 10 √©veseknek</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
            background: linear-gradient(135deg, #ffcc00 0%, #ff9900 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            border: 8px solid #4a90e2;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(45deg, #4a90e2, #357ae8);
            border-radius: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "üêé";
            font-size: 100px;
            position: absolute;
            top: -20px;
            left: -20px;
            opacity: 0.3;
            transform: rotate(-30deg);
        }

        header::after {
            content: "‚ôû";
            font-size: 100px;
            position: absolute;
            bottom: -20px;
            right: -20px;
            opacity: 0.3;
            transform: rotate(30deg);
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
            color: #ffeb3b;
        }

        h2 {
            color: #4a90e2;
            margin: 25px 0 15px;
            font-size: 2rem;
            border-bottom: 4px dotted #4a90e2;
            padding-bottom: 10px;
        }

        h3 {
            color: #ff6b6b;
            margin: 20px 0 10px;
            font-size: 1.5rem;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #ffeb3b;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .age-badge {
            background: #ff6b6b;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px 0;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 4px 0 #d32f2f;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 5px solid;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-blue {
            border-color: #4a90e2;
        }

        .card-green {
            border-color: #4caf50;
        }

        .card-red {
            border-color: #ff6b6b;
        }

        .card-yellow {
            border-color: #ffcc00;
        }

        .game-section {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 25px;
            border-radius: 20px;
            margin-top: 30px;
            border: 5px solid #4a90e2;
        }

        .input-area {
            display: flex;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: bold;
            color: #4a90e2;
            font-size: 1.1rem;
        }

        input[type="number"] {
            padding: 15px;
            font-size: 1.2rem;
            border: 3px solid #4a90e2;
            border-radius: 15px;
            width: 100px;
            text-align: center;
            background: #fff9c4;
            font-weight: bold;
        }

        .button-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 18px 35px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 6px 0 rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 3px 0 rgba(0, 0, 0, 0.2);
        }

        .btn-start {
            background: linear-gradient(45deg, #4caf50, #2e7d32);
            color: white;
        }

        .btn-reset {
            background: linear-gradient(45deg, #ff6b6b, #d32f2f);
            color: white;
        }

        .btn-tip {
            background: linear-gradient(45deg, #ffcc00, #ff9800);
            color: #333;
        }

        .chessboard-container {
            background: #8b4513;
            padding: 25px;
            border-radius: 20px;
            margin: 30px 0;
            border: 8px solid #654321;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .chessboard {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 2px;
            background: #654321;
            padding: 10px;
            border-radius: 10px;
            border: 5px solid #333;
            margin: 0 auto;
            max-width: 500px;
        }

        .cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: 'Arial', sans-serif;
        }

        .cell.light {
            background: #f0d9b5;
            color: #000;
        }

        .cell.dark {
            background: #b58863;
            color: #fff;
        }

        .cell.start {
            background: linear-gradient(45deg, #4caf50, #2e7d32) !important;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 15px #4caf50;
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .cell.visited {
            animation: visited-pulse 0.5s ease;
        }

        @keyframes visited-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .cell-number {
            font-size: 0.9rem;
            font-weight: bold;
            z-index: 1;
        }

        .cell-coords {
            position: absolute;
            font-size: 0.6rem;
            opacity: 0.7;
            top: 3px;
            left: 3px;
        }

        .knight-icon {
            font-size: 1.5rem;
            margin-right: 5px;
        }

        .python-code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 15px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            border: 5px solid #444;
        }

        .code-keyword { color: #ff79c6; }
        .code-function { color: #50fa7b; }
        .code-string { color: #f1fa8c; }
        .code-comment { color: #6272a4; }
        .code-number { color: #bd93f9; }

        .explanation {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 8px solid #4caf50;
        }

        .tip-box {
            background: #fff3e0;
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            border: 3px dashed #ff9800;
        }

        .fun-fact {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            border: 3px dotted #2196f3;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 15px;
            border: 3px solid #4a90e2;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            margin: 20px 0;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 8px solid #ffcc00;
            border-top-color: #ff6b6b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .knight-move {
            display: inline-block;
            padding: 5px 10px;
            background: #4a90e2;
            color: white;
            border-radius: 10px;
            margin: 5px;
            font-weight: bold;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(8, 30px);
            gap: 1px;
            background: #333;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .example-cell {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .emoji {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .download-section {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background: linear-gradient(45deg, #2196f3, #0d47a1);
            border-radius: 20px;
            color: white;
        }

        .download-btn {
            display: inline-block;
            padding: 15px 30px;
            background: #ffeb3b;
            color: #333;
            text-decoration: none;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 0 rgba(0, 0, 0, 0.2);
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 rgba(0, 0, 0, 0.2);
            background: #fff176;
        }

        .hint {
            background: #fff9c4;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 5px solid #ffd600;
            display: none;
        }

        .achievement {
            background: linear-gradient(45deg, #ffcc00, #ff9800);
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            color: #333;
            display: none;
            animation: achievement-pop 0.5s ease;
        }

        @keyframes achievement-pop {
            0% { transform: scale(0); }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 3px dotted #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="age-badge">‚ú® 10 √©veseknek ‚ú®</div>
            <h1>üêé Lovasj√°r√°s üêé</h1>
            <div class="subtitle">A sakkl√≥ izgalmas kalandja a sakkt√°bl√°n!</div>
            <p style="color: #ffeb3b; font-size: 1.1rem;">Tal√°ld meg, hogyan j√°rhatja be a l√≥ az eg√©sz t√°bl√°t!</p>
        </header>

        <div class="content-grid">
            <div class="card card-blue">
                <h2>üéØ Mi ez a j√°t√©k?</h2>
                <p>Van egy <strong>8√ó8-as sakkt√°bl√°d</strong> √©s rajta egy <strong>l√≥ figur√°d</strong> üêé. A c√©l, hogy a lovat √∫gy mozgasd, hogy <strong>minden mez≈ëre pontosan egyszer l√©pjen!</strong></p>
                
                <div class="fun-fact">
                    <span class="emoji">üí°</span>
                    <strong>Fun fact:</strong> Ez a j√°t√©k m√°r 1000 √©ve ismert! Euler matematikus is foglalkozott vele.
                </div>
            </div>

            <div class="card card-green">
                <h2>üêé Hogyan mozog a l√≥?</h2>
                <p>A l√≥ "L" alakban ugrik:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>2 mez≈ët oldalra</strong> √©s <strong>1 mez≈ët fel/le</strong></li>
                    <li>VAGY <strong>1 mez≈ët oldalra</strong> √©s <strong>2 mez≈ët fel/le</strong></li>
                </ul>
                
                <div class="tip-box">
                    <span class="emoji">üéÆ</span>
                    Pr√≥b√°ld ki a jobb fels≈ë sarokban a <strong>Kattints egy mez≈ëre!</strong> gombot!
                </div>
            </div>
        </div>

        <div class="game-section">
            <h2>üéÆ J√°tsszunk!</h2>
            
            <div class="input-area">
                <div class="input-group">
                    <label for="startX"><span class="emoji">‚û°Ô∏è</span> Oszlop (1-8):</label>
                    <input type="number" id="startX" min="1" max="8" value="2">
                </div>
                
                <div class="input-group">
                    <label for="startY"><span class="emoji">‚¨áÔ∏è</span> Sor (1-8):</label>
                    <input type="number" id="startY" min="1" max="8" value="1">
                </div>
                
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span class="emoji">üí°</span>
                    <div>Pr√≥b√°ld: <button onclick="setExample(2,1)" style="padding: 5px 10px; background: #4a90e2; color: white; border: none; border-radius: 5px; cursor: pointer;">2,1</button>
                    <button onclick="setExample(4,4)" style="padding: 5px 10px; background: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer;">4,4</button>
                    <button onclick="setExample(1,1)" style="padding: 5px 10px; background: #ff6b6b; color: white; border: none; border-radius: 5px; cursor: pointer;">1,1</button></div>
                </div>
            </div>

            <div class="button-container">
                <button class="btn-start" onclick="startGame()">
                    <span class="emoji">üöÄ</span>
                    Ind√≠tsd a L√≥ Kalandj√°t!
                </button>
                
                <button class="btn-reset" onclick="resetGame()">
                    <span class="emoji">üîÑ</span>
                    √öjrakezd√©s
                </button>
                
                <button class="btn-tip" onclick="showHint()">
                    <span class="emoji">‚ùì</span>
                    Seg√≠ts√©g k√©ne!
                </button>
            </div>

            <div id="hint" class="hint">
                <strong>Pro tippek:</strong><br>
                1. Kezdd a k√∂z√©pen (4,4) - k√∂nnyebb!<br>
                2. A l√≥ szereti a t√°bla k√∂zep√©t<br>
                3. Ha nem siker√ºl, pr√≥b√°ld √∫jra!<br>
                4. N√©zd meg a Python k√≥dot alul!
            </div>

            <div id="achievement" class="achievement">
                üéâ Hurr√°! Megtal√°ltad a teljes utat! üéâ
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>A l√≥ keresg√©li az utat... Ez egy kicsit id≈ëbe telhet! üêé</p>
                <p><small>M√≠g v√°rsz, tudtad, hogy a l√≥nak 8-f√©lek√©ppen lehet ugrani?</small></p>
            </div>

            <div class="chessboard-container">
                <h3><span class="emoji">‚ôú</span> Sakkt√°bla</h3>
                <div id="chessboard" class="chessboard"></div>
                <p style="text-align: center; margin-top: 15px; color: #666;">
                    <span class="emoji">üíö</span> Z√∂ld = Kezd≈ëpont | <span class="emoji">üî¢</span> Sz√°mok = H√°nyadik l√©p√©sben √©rt oda
                </p>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="steps">0</div>
                    <div class="stat-label">L√©p√©s</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="backtracks">0</div>
                    <div class="stat-label">Visszal√©p√©s</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="time">0s</div>
                    <div class="stat-label">Id≈ë</div>
                </div>
            </div>
        </div>

        <h2><span class="emoji">üêç</span> Python K√≥d - √çgy m≈±k√∂dik a program</h2>
        
        <div class="python-code">
<pre><code><span class="code-comment"># 1. A l√≥ lehets√©ges l√©p√©sei - "L" alakban!</span>
<span class="code-keyword">lo_lepesek</span> = [
    (<span class="code-number">2</span>, <span class="code-number">1</span>),   <span class="code-comment"># 2 jobbra, 1 le</span>
    (<span class="code-number">1</span>, <span class="code-number">2</span>),   <span class="code-comment"># 1 jobbra, 2 le</span>
    (<span class="code-number">-1</span>, <span class="code-number">2</span>),  <span class="code-comment"># 1 balra, 2 le</span>
    (<span class="code-number">-2</span>, <span class="code-number">1</span>),  <span class="code-comment"># 2 balra, 1 le</span>
    (<span class="code-number">-2</span>, <span class="code-number">-1</span>), <span class="code-comment"># 2 balra, 1 fel</span>
    (<span class="code-number">-1</span>, <span class="code-number">-2</span>), <span class="code-comment"># 1 balra, 2 fel</span>
    (<span class="code-number">1</span>, <span class="code-number">-2</span>),  <span class="code-comment"># 1 jobbra, 2 fel</span>
    (<span class="code-number">2</span>, <span class="code-number">-1</span>)   <span class="code-comment"># 2 jobbra, 1 fel</span>
]

<span class="code-comment"># 2. Megn√©zz√ºk, j√≥-e egy l√©p√©s</span>
<span class="code-keyword">def</span> <span class="code-function">jo_lepese</span>(x, y):
    <span class="code-keyword">if</span> x < <span class="code-number">0</span> <span class="code-keyword">or</span> x >= <span class="code-number">8</span> <span class="code-keyword">or</span> y < <span class="code-number">0</span> <span class="code-keyword">or</span> y >= <span class="code-number">8</span>:
        <span class="code-keyword">return</span> <span class="code-keyword">False</span>  <span class="code-comment"># Kimenne a t√°bl√°r√≥l</span>
    <span class="code-keyword">if</span> sakktabla[y][x] != <span class="code-number">0</span>:
        <span class="code-keyword">return</span> <span class="code-keyword">False</span>  <span class="code-comment"># M√°r j√°rt itt</span>
    <span class="code-keyword">return</span> <span class="code-keyword">True</span>

<span class="code-comment"># 3. F≈ë j√°t√©kf√ºggv√©ny - REKURZI√ì!</span>
<span class="code-keyword">def</span> <span class="code-function">jatsz_lo_utjat</span>(x, y, lepes_szam):
    <span class="code-comment"># Ha el√©rt√ºk a 64-et, siker! üéâ</span>
    <span class="code-keyword">if</span> lepes_szam == <span class="code-number">64</span>:
        <span class="code-keyword">return</span> <span class="code-keyword">True</span>
    
    <span class="code-comment"># Keres√ºnk j√≥ l√©p√©seket</span>
    <span class="code-keyword">for</span> dx, dy <span class="code-keyword">in</span> lo_lepesek:
        uj_x, uj_y = x + dx, y + dy
        
        <span class="code-keyword">if</span> jo_lepese(uj_x, uj_y):
            sakktabla[uj_y][uj_x] = lepes_szam + <span class="code-number">1</span>
            
            <span class="code-comment"># ‚≠ê REKURZ√çV HIV√ÅS ‚≠ê - √∂nmag√°t h√≠vja!</span>
            <span class="code-keyword">if</span> jatsz_lo_utjat(uj_x, uj_y, lepes_szam + <span class="code-number">1</span>):
                <span class="code-keyword">return</span> <span class="code-keyword">True</span>
            
            <span class="code-comment"># Visszal√©p√©s ha nem siker√ºlt</span>
            sakktabla[uj_y][uj_x] = <span class="code-number">0</span>
    
    <span class="code-keyword">return</span> <span class="code-keyword">False</span></code></pre>
        </div>

        <div class="explanation">
            <h3><span class="emoji">üìö</span> Magyar√°zat 10 √©veseknek</h3>
            
            <div class="content-grid">
                <div class="card card-red">
                    <h4>üîÑ Mi az a REKURZI√ì?</h4>
                    <p>Olyan, mintha mes√©ln√©l egy mes√©t, √©s a mes√©ben lenne egy kisebb mese, √©s azban is lenne egy mese... A program is √≠gy m≈±k√∂dik: a <code>jatsz_lo_utjat</code> f√ºggv√©ny √∂nmag√°t h√≠vja!</p>
                </div>
                
                <div class="card card-yellow">
                    <h4>üîô Mi az a BACKTRACKING?</h4>
                    <p>Mint egy labirintusban: ha zs√°kutc√°ba √©rsz, visszam√©sz az utols√≥ el√°gaz√°shoz, √©s m√°sik utat pr√≥b√°lsz. Pontosan ezt csin√°lja a l√≥ is!</p>
                </div>
            </div>
            
            <div class="tip-box">
                <span class="emoji">üé≤</span>
                <strong>Pr√≥b√°ld ki ezeket:</strong><br>
                ‚Ä¢ 1,1 - sarokban (neh√©z!)<br>
                ‚Ä¢ 4,4 - k√∂z√©pen (k√∂nny≈±!)<br>
                ‚Ä¢ 8,8 - m√°sik sarok (izgalmas!)
            </div>
        </div>

        <div class="download-section">
            <h3><span class="emoji">üíæ</span> T√∂ltsd le a j√°t√©kot!</h3>
            <p>Mentsd el ezt az oldalt, √©s j√°tszhatsz offline is!</p>
            <a href="#" class="download-btn" onclick="downloadCode()">
                <span class="emoji">‚¨áÔ∏è</span> Let√∂lt√©s .html f√°jlk√©nt
            </a>
            <p style="margin-top: 10px; font-size: 0.9rem;">Kattints, majd ment√©s m√°sk√©nt...</p>
        </div>

        <footer>
            <p>K√©sz√≠tette: Python √©s JavaScript var√°zslat√°val ‚ú®</p>
            <p>K√∂sz√∂n√∂m, hogy j√°tszott√°l a Lovasj√°r√°s j√°t√©kkal! üêé</p>
            <p style="margin-top: 10px; color: #888;">¬© 2024 - Mindenki sz√°m√°ra, de f≈ëleg 10 √©veseknek! üòä</p>
        </footer>
    </div>

    <script>
        // ======================
        // 1. Alap v√°ltoz√≥k
        // ======================
        const boardSize = 8;
        let board = [];
        let startTime;
        let backtracks = 0;
        let isRunning = false;

        // A l√≥ lehets√©ges l√©p√©sei
        const knightMoves = [
            [2, 1], [1, 2], [-1, 2], [-2, 1],
            [-2, -1], [-1, -2], [1, -2], [2, -1]
        ];

        // ======================
        // 2. Inicializ√°l√°s
        // ======================
        function init() {
            createChessboard();
            resetGame();
        }

        function createChessboard() {
            const chessboard = document.getElementById('chessboard');
            chessboard.innerHTML = '';
            
            for (let y = 0; y < boardSize; y++) {
                for (let x = 0; x < boardSize; x++) {
                    const cell = document.createElement('div');
                    cell.className = `cell ${(x + y) % 2 === 0 ? 'light' : 'dark'}`;
                    cell.id = `cell-${x}-${y}`;
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    
                    // Koordin√°t√°k
                    const coords = document.createElement('div');
                    coords.className = 'cell-coords';
                    coords.textContent = `${x + 1},${y + 1}`;
                    cell.appendChild(coords);
                    
                    // L√©p√©ssz√°m
                    const number = document.createElement('div');
                    number.className = 'cell-number';
                    cell.appendChild(number);
                    
                    // Kattint√°sra v√°laszt√°s
                    cell.onclick = () => selectCell(x, y);
                    
                    chessboard.appendChild(cell);
                }
            }
        }

        // ======================
        // 3. Seg√©df√ºggv√©nyek
        // ======================
        function selectCell(x, y) {
            document.getElementById('startX').value = x + 1;
            document.getElementById('startY').value = y + 1;
            
            // Anim√°ci√≥ a kiv√°lasztott cell√°ra
            const cell = document.getElementById(`cell-${x}-${y}`);
            cell.style.animation = 'visited-pulse 0.5s ease';
            setTimeout(() => {
                cell.style.animation = '';
            }, 500);
        }

        function setExample(x, y) {
            document.getElementById('startX').value = x;
            document.getElementById('startY').value = y;
            showMessage(`Be√°ll√≠tva: ${x}, ${y}`, '#4caf50');
        }

        function showMessage(text, color) {
            const msg = document.createElement('div');
            msg.textContent = text;
            msg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${color};
                color: white;
                padding: 15px;
                border-radius: 10px;
                z-index: 1000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(msg);
            
            setTimeout(() => {
                msg.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => msg.remove(), 300);
            }, 2000);
        }

        // CSS anim√°ci√≥k
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ======================
        // 4. F≈ë j√°t√©klogika
        // ======================
        function startGame() {
            if (isRunning) return;
            
            const startX = parseInt(document.getElementById('startX').value) - 1;
            const startY = parseInt(document.getElementById('startY').value) - 1;
            
            if (startX < 0 || startX >= boardSize || startY < 0 || startY >= boardSize) {
                showMessage('Hiba: 1 √©s 8 k√∂z√∂tt v√°lassz!', '#ff6b6b');
                return;
            }
            
            resetGame();
            isRunning = true;
            startTime = Date.now();
            backtracks = 0;
            
            // J√°t√©k ind√≠t√°sa aszinkron m√≥don
            document.getElementById('loading').style.display = 'block';
            
            setTimeout(() => {
                board = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                board[startY][startX] = 1;
                
                const success = solveKnightTour(startX, startY, 2);
                
                updateDisplay();
                isRunning = false;
                document.getElementById('loading').style.display = 'none';
                
                if (success) {
                    const time = ((Date.now() - startTime) / 1000).toFixed(2);
                    document.getElementById('time').textContent = time + 's';
                    showAchievement();
                    showMessage('üéâ Siker! A l√≥ bej√°rta az eg√©sz t√°bl√°t!', '#4caf50');
                } else {
                    showMessage('üòî Sajnos nem tal√°ltam teljes utat. Pr√≥b√°ld √∫jra!', '#ff6b6b');
                }
            }, 100);
        }

        function solveKnightTour(x, y, moveNum) {
            // Alapeset: minden mez≈ët bej√°rtunk
            if (moveNum > boardSize * boardSize) {
                return true;
            }
            
            // Lehets√©ges l√©p√©sek keres√©se
            const candidates = [];
            
            for (const [dx, dy] of knightMoves) {
                const nx = x + dx;
                const ny = y + dy;
                
                if (isValidMove(nx, ny)) {
                    const degree = countPossibleMoves(nx, ny);
                    candidates.push({nx, ny, degree});
                }
            }
            
            // Rendez√©s a legkevesebb lehet≈ës√©g szerint (Warnsdorff)
            candidates.sort((a, b) => a.degree - b.degree);
            
            // L√©p√©sek kipr√≥b√°l√°sa
            for (const cand of candidates) {
                board[cand.ny][cand.nx] = moveNum;
                
                // Friss√≠tj√ºk a kijelz√©st
                if (moveNum % 5 === 0) {
                    updateDisplay();
                }
                
                // Rekurz√≠v h√≠v√°s
                if (solveKnightTour(cand.nx, cand.ny, moveNum + 1)) {
                    return true;
                }
                
                // Backtracking
                board[cand.ny][cand.nx] = 0;
                backtracks++;
                document.getElementById('backtracks').textContent = backtracks;
            }
            
            return false;
        }

        function isValidMove(x, y) {
            return x >= 0 && x < boardSize && y >= 0 && y < boardSize && board[y][x] === 0;
        }

        function countPossibleMoves(x, y) {
            let count = 0;
            for (const [dx, dy] of knightMoves) {
                const nx = x + dx;
                const ny = y + dy;
                if (isValidMove(nx, ny)) {
                    count++;
                }
            }
            return count;
        }

        // ======================
        // 5. Kijelz≈ë friss√≠t√©s
        // ======================
        function updateDisplay() {
            const startX = parseInt(document.getElementById('startX').value) - 1;
            const startY = parseInt(document.getElementById('startY').value) - 1;
            
            let maxStep = 0;
            
            for (let y = 0; y < boardSize; y++) {
                for (let x = 0; x < boardSize; x++) {
                    const cell = document.getElementById(`cell-${x}-${y}`);
                    const number = cell.querySelector('.cell-number');
                    
                    // Kezd≈ëcell√°t z√∂ldre festj√ºk
                    if (x === startX && y === startY && board[y][x] === 1) {
                        cell.className = `cell start`;
                    } else {
                        cell.className = `cell ${(x + y) % 2 === 0 ? 'light' : 'dark'}`;
                    }
                    
                    // L√©p√©ssz√°m be√°ll√≠t√°sa
                    if (board[y][x] > 0) {
                        number.textContent = board[y][x];
                        maxStep = Math.max(maxStep, board[y][x]);
                    } else {
                        number.textContent = '';
                    }
                }
            }
            
            document.getElementById('steps').textContent = maxStep;
        }

        function resetGame() {
            board = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
            backtracks = 0;
            document.getElementById('steps').textContent = '0';
            document.getElementById('backtracks').textContent = '0';
            document.getElementById('time').textContent = '0s';
            document.getElementById('achievement').style.display = 'none';
            document.getElementById('hint').style.display = 'none';
            
            updateDisplay();
        }

        // ======================
        // 6. Extra funkci√≥k
        // ======================
        function showHint() {
            const hint = document.getElementById('hint');
            hint.style.display = 'block';
            setTimeout(() => {
                hint.style.display = 'none';
            }, 5000);
        }

        function showAchievement() {
            const achievement = document.getElementById('achievement');
            achievement.style.display = 'block';
            setTimeout(() => {
                achievement.style.display = 'none';
            }, 3000);
        }

        function downloadCode() {
            // L√©trehozunk egy Blob-ot a HTML k√≥db√≥l
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            
            // L√©trehozunk egy let√∂lt√©si linket
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lovasjaras-jatek-10-eveseknek.html';
            a.click();
            
            // Felszabad√≠tjuk az URL-t
            setTimeout(() => URL.revokeObjectURL(url), 100);
            
            showMessage('‚¨áÔ∏è Let√∂lt√©s elkezd≈ëd√∂tt!', '#2196f3');
        }

        // ======================
        // 7. Billenty≈±zet t√°mogat√°s
        // ======================
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                startGame();
            } else if (e.key === 'Escape') {
                resetGame();
            } else if (e.key === 'h' || e.key === 'H') {
                showHint();
            }
        });

        // ======================
        // 8. Ind√≠t√°s
        // ======================
        window.onload = init;

        // ======================
        // 9. Inform√°ci√≥ a console-ban
        // ======================
        console.log(`
        üêé LOVASJ√ÅR√ÅS J√ÅT√âK üêé
        ====================
        √údv√∂z√∂llek a Knight's Tour j√°t√©kban!
        
        Haszn√°lhat√≥ billenty≈±k:
        ‚Ä¢ Enter vagy Space: J√°t√©k ind√≠t√°sa
        ‚Ä¢ Escape: √öjrakezd√©s
        ‚Ä¢ H: Seg√≠ts√©g megjelen√≠t√©se
        
        J√≥ sz√≥rakoz√°st! üéÆ
        `);
    </script>
</body>
</html>

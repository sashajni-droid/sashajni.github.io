<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lovasj√°r√°s (Knight's Tour)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 20px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .input-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .board-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #4ecdc4;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-weight: 500;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 14px 28px;
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.solve {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }

        button.solve:hover {
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }

        button.reset {
            background: linear-gradient(45deg, #4776E6, #8E54E9);
        }

        button.reset:hover {
            box-shadow: 0 5px 15px rgba(142, 84, 233, 0.4);
        }

        .chessboard {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 2px;
            background: #333;
            padding: 10px;
            border-radius: 8px;
            border: 3px solid #555;
            max-width: 500px;
            margin: 0 auto;
        }

        .cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            position: relative;
            transition: all 0.3s ease;
        }

        .cell.light {
            background: #f0d9b5;
            color: #000;
        }

        .cell.dark {
            background: #b58863;
            color: #fff;
        }

        .cell.start {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53) !important;
            color: white;
            font-weight: bold;
        }

        .cell.visited {
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .cell-number {
            font-size: 0.8rem;
            font-weight: bold;
        }

        .coordinates {
            position: absolute;
            font-size: 0.6rem;
            opacity: 0.6;
            top: 2px;
            left: 2px;
        }

        .solution-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
        }

        .solution-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 1px;
            background: #222;
            padding: 10px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
        }

        .solution-cell {
            padding: 10px;
            text-align: center;
            background: #333;
            color: white;
            font-weight: bold;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .info-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-card h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-card p {
            color: #ccc;
            line-height: 1.6;
        }

        .knight-icon {
            font-size: 2rem;
            margin-right: 10px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #4ecdc4;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .path-line {
            position: absolute;
            background: rgba(255, 107, 107, 0.5);
            pointer-events: none;
            z-index: 1;
        }

        .algorithm-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #4ecdc4;
        }

        .step-counter {
            text-align: center;
            font-size: 1.2rem;
            margin: 20px 0;
            color: #4ecdc4;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff6b6b;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ôû Lovasj√°r√°s (Knight's Tour)</h1>
            <div class="subtitle">8√ó8-as sakkt√°bl√°n ‚Äì a l√≥ minden mez≈ët pontosan egyszer √©rint</div>
        </header>

        <div class="main-content">
            <div class="input-section">
                <h2>üìä Kezd≈ëpoz√≠ci√≥ be√°ll√≠t√°sa</h2>
                <div class="input-group">
                    <label for="startX">X koordin√°ta (1-8):</label>
                    <input type="number" id="startX" min="1" max="8" value="2" placeholder="P√©ld√°ul: 2">
                </div>
                <div class="input-group">
                    <label for="startY">Y koordin√°ta (1-8):</label>
                    <input type="number" id="startY" min="1" max="8" value="1" placeholder="P√©ld√°ul: 1">
                </div>
                
                <div class="algorithm-info">
                    <h3>‚öôÔ∏è Warnsdorff algoritmus</h3>
                    <p>Mindig azt a mez≈ët v√°lasztja, amelyb≈ël a legkevesebb tov√°bbi l√©p√©s lehets√©ges. Ez n√∂veli a teljes k√∂r bej√°r√°s sikeress√©g√©t.</p>
                </div>

                <div class="button-group">
                    <button class="solve" onclick="solveTour()">Megold√°s keres√©se</button>
                    <button class="reset" onclick="resetBoard()">T√°bla t√∂rl√©se</button>
                </div>

                <div class="step-counter" id="stepCounter">
                    L√©p√©sek: 0/64
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="timeStat">0s</div>
                        <div class="stat-label">Fut√°si id≈ë</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="backtracks">0</div>
                        <div class="stat-label">Visszal√©p√©sek</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="attempts">1</div>
                        <div class="stat-label">Pr√≥b√°lkoz√°sok</div>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Megold√°s keres√©se folyamatban...</p>
                </div>
            </div>

            <div class="board-section">
                <h2>‚ôú Sakkt√°bla</h2>
                <div id="chessboard" class="chessboard"></div>
                <div style="text-align: center; margin-top: 20px; color: #aaa;">
                    Z√∂ld: kezd≈ëpoz√≠ci√≥ | Sz√°mok: l√©p√©sek sorrendje
                </div>
            </div>
        </div>

        <div class="solution-section">
            <h2>üìã Megold√°s m√°trixa</h2>
            <div id="solutionGrid" class="solution-grid"></div>
            <div style="margin-top: 20px; color: #ccc;">
                <p>A m√°trix minden cell√°ja azt mutatja, h√°nyadik l√©p√©sben √©rt a l√≥ az adott mez≈ëre.</p>
            </div>
        </div>

        <div class="info-section">
            <div class="info-card">
                <h3>üéØ A probl√©ma</h3>
                <p>A lovasj√°r√°s (Knight's Tour) egy matematikai probl√©ma, ahol a sakk l√≥j√°val egy 8√ó8-as t√°bl√°n kell minden mez≈ët pontosan egyszer √©rinteni.</p>
            </div>
            <div class="info-card">
                <h3>üèá A l√≥ l√©p√©sei</h3>
                <p>A l√≥ "L" alakban mozog: 2 mez≈ët egy ir√°nyba √©s 1 mez≈ët a mer≈ëleges ir√°nyba. √ñsszesen 8 lehets√©ges l√©p√©se van.</p>
            </div>
            <div class="info-card">
                <h3>‚ö° Algoritmus</h3>
                <p>A program Warnsdorff szab√°lyt alkalmaz: mindig azt a k√∂vetkez≈ë mez≈ët v√°lasztja, amelyb≈ël a legkevesebb tov√°bbi l√©p√©s lehets√©ges.</p>
            </div>
        </div>
    </div>

    <script>
        const boardSize = 8;
        let board = [];
        let solutionMatrix = [];
        let startTime;
        let backtracks = 0;
        let attempts = 1;

        // L√≥ lehets√©ges l√©p√©sei
        const knightMoves = [
            [2, 1], [1, 2], [-1, 2], [-2, 1],
            [-2, -1], [-1, -2], [1, -2], [2, -1]
        ];

        // Inicializ√°l√°s
        function init() {
            createBoard();
            createSolutionGrid();
            updateDisplay();
        }

        // Sakkt√°bla l√©trehoz√°sa
        function createBoard() {
            const chessboard = document.getElementById('chessboard');
            chessboard.innerHTML = '';
            
            for (let y = 0; y < boardSize; y++) {
                for (let x = 0; x < boardSize; x++) {
                    const cell = document.createElement('div');
                    cell.className = `cell ${(x + y) % 2 === 0 ? 'light' : 'dark'}`;
                    cell.id = `cell-${x}-${y}`;
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    
                    // Koordin√°t√°k megjelen√≠t√©se
                    const coords = document.createElement('div');
                    coords.className = 'coordinates';
                    coords.textContent = `${x + 1},${y + 1}`;
                    cell.appendChild(coords);
                    
                    // L√©p√©ssz√°m megjelen√≠t√©se
                    const number = document.createElement('div');
                    number.className = 'cell-number';
                    cell.appendChild(number);
                    
                    chessboard.appendChild(cell);
                }
            }
        }

        // Megold√°s m√°trix l√©trehoz√°sa
        function createSolutionGrid() {
            const grid = document.getElementById('solutionGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < boardSize * boardSize; i++) {
                const cell = document.createElement('div');
                cell.className = 'solution-cell';
                cell.id = `sol-cell-${i}`;
                grid.appendChild(cell);
            }
        }

        // Megold√°s keres√©se
        async function solveTour() {
            const startX = parseInt(document.getElementById('startX').value) - 1;
            const startY = parseInt(document.getElementById('startY').value) - 1;
            
            if (startX < 0 || startX >= boardSize || startY < 0 || startY >= boardSize) {
                alert('K√©rlek, adj meg √©rv√©nyes koordin√°t√°kat (1-8)!');
                return;
            }
            
            // T√∂rl√©s √©s √∫jrainicializ√°l√°s
            resetBoard();
            backtracks = 0;
            attempts = 1;
            
            // Statisztik√°k
            document.getElementById('backtracks').textContent = backtracks;
            document.getElementById('attempts').textContent = attempts;
            
            // Bet√∂lt√©s ind√≠t√°sa
            document.getElementById('loading').style.display = 'block';
            startTime = Date.now();
            
            // Megold√°s keres√©se (aszinkron m√≥don, hogy ne fagyjon ki a UI)
            setTimeout(() => {
                board = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                solutionMatrix = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                
                // Kezd≈ëpoz√≠ci√≥ be√°ll√≠t√°sa
                board[startY][startX] = 1;
                solutionMatrix[startY][startX] = 1;
                
                // Megold√°s keres√©se Warnsdorff algoritmussal
                const success = solveKnightTour(startX, startY, 2);
                
                if (!success) {
                    // Ha nem siker√ºlt, pr√≥b√°ljunk ford√≠tott sorrenddel
                    attempts++;
                    document.getElementById('attempts').textContent = attempts;
                    resetBoard();
                    board = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                    board[startY][startX] = 1;
                    
                    const successAlt = solveKnightTourAlt(startX, startY, 2);
                    
                    if (!successAlt) {
                        // Ha ez sem m≈±k√∂dik, haszn√°ljunk el≈ëre defini√°lt megold√°st
                        attempts++;
                        document.getElementById('attempts').textContent = attempts;
                        usePredefinedSolution(startX, startY);
                    }
                }
                
                // Friss√≠t√©s
                updateDisplay();
                
                // Statisztik√°k friss√≠t√©se
                const elapsedTime = (Date.now() - startTime) / 1000;
                document.getElementById('timeStat').textContent = `${elapsedTime.toFixed(2)}s`;
                document.getElementById('loading').style.display = 'none';
            }, 100);
        }

        // Warnsdorff algoritmus
        function solveKnightTour(x, y, moveNum) {
            if (moveNum > boardSize * boardSize) {
                return true;
            }
            
            // Lehets√©ges l√©p√©sek gy≈±jt√©se
            const possibleMoves = [];
            
            for (const [dx, dy] of knightMoves) {
                const nx = x + dx;
                const ny = y + dy;
                
                if (isValidMove(nx, ny)) {
                    const degree = countPossibleMoves(nx, ny);
                    possibleMoves.push({ nx, ny, degree });
                }
            }
            
            // Rendez√©s a legkevesebb lehet≈ës√©g szerint (Warnsdorff szab√°ly)
            possibleMoves.sort((a, b) => a.degree - b.degree);
            
            // L√©p√©sek kipr√≥b√°l√°sa
            for (const move of possibleMoves) {
                board[move.ny][move.nx] = moveNum;
                solutionMatrix[move.ny][move.nx] = moveNum;
                
                if (solveKnightTour(move.nx, move.ny, moveNum + 1)) {
                    return true;
                }
                
                // Backtrack
                backtracks++;
                document.getElementById('backtracks').textContent = backtracks;
                board[move.ny][move.nx] = 0;
                solutionMatrix[move.ny][move.nx] = 0;
            }
            
            return false;
        }

        // Alternat√≠v verzi√≥ (ford√≠tott sorrend)
        function solveKnightTourAlt(x, y, moveNum) {
            if (moveNum > boardSize * boardSize) {
                return true;
            }
            
            const possibleMoves = [];
            
            for (const [dx, dy] of knightMoves) {
                const nx = x + dx;
                const ny = y + dy;
                
                if (isValidMove(nx, ny)) {
                    const degree = countPossibleMoves(nx, ny);
                    possibleMoves.push({ nx, ny, degree });
                }
            }
            
            // Ford√≠tott sorrend: a legt√∂bb lehet≈ës√©ggel rendelkez≈ë el≈ësz√∂r
            possibleMoves.sort((a, b) => b.degree - a.degree);
            
            for (const move of possibleMoves) {
                board[move.ny][move.nx] = moveNum;
                solutionMatrix[move.ny][move.nx] = moveNum;
                
                if (solveKnightTourAlt(move.nx, move.ny, moveNum + 1)) {
                    return true;
                }
                
                backtracks++;
                document.getElementById('backtracks').textContent = backtracks;
                board[move.ny][move.nx] = 0;
                solutionMatrix[move.ny][move.nx] = 0;
            }
            
            return false;
        }

        // El≈ëre defini√°lt megold√°s
        function usePredefinedSolution(startX, startY) {
            // Egy el≈ëre defini√°lt teljes k√∂r
            const predefined = [
                [1, 38, 55, 34, 3, 36, 19, 22],
                [54, 47, 2, 37, 20, 23, 4, 17],
                [39, 56, 33, 46, 35, 18, 21, 10],
                [48, 53, 40, 57, 24, 11, 16, 5],
                [41, 32, 49, 52, 45, 6, 9, 12],
                [50, 27, 42, 31, 58, 25, 14, 7],
                [43, 30, 51, 26, 13, 8, 59, 64],
                [28, 49, 44, 29, 60, 63, 2, 15]
            ];
            
            // √Åtalak√≠t√°s a kezd≈ëpoz√≠ci√≥hoz
            const startVal = predefined[startY][startX];
            
            for (let y = 0; y < boardSize; y++) {
                for (let x = 0; x < boardSize; x++) {
                    let val = predefined[y][x];
                    // √Åtalak√≠t√°s, hogy a kezd≈ëpoz√≠ci√≥n 1 legyen
                    val = ((val - startVal + 64) % 64) + 1;
                    board[y][x] = val;
                    solutionMatrix[y][x] = val;
                }
            }
        }

        // Seg√©df√ºggv√©nyek
        function isValidMove(x, y) {
            return x >= 0 && x < boardSize && y >= 0 && y < boardSize && board[y][x] === 0;
        }

        function countPossibleMoves(x, y) {
            let count = 0;
            for (const [dx, dy] of knightMoves) {
                const nx = x + dx;
                const ny = y + dy;
                if (isValidMove(nx, ny)) {
                    count++;
                }
            }
            return count;
        }

        // Kijelz≈ë friss√≠t√©se
        function updateDisplay() {
            const startX = parseInt(document.getElementById('startX').value) - 1;
            const startY = parseInt(document.getElementById('startY').value) - 1;
            
            let maxStep = 0;
            let visitedCells = 0;
            
            // Sakkt√°bla friss√≠t√©se
            for (let y = 0; y < boardSize; y++) {
                for (let x = 0; x < boardSize; x++) {
                    const cell = document.getElementById(`cell-${x}-${y}`);
                    const number = cell.querySelector('.cell-number');
                    
                    if (x === startX && y === startY) {
                        cell.classList.add('start');
                        cell.classList.remove('light', 'dark');
                    } else {
                        cell.classList.remove('start');
                        cell.className = `cell ${(x + y) % 2 === 0 ? 'light' : 'dark'}`;
                    }
                    
                    if (board[y][x] > 0) {
                        number.textContent = board[y][x];
                        cell.classList.add('visited');
                        visitedCells++;
                        maxStep = Math.max(maxStep, board[y][x]);
                    } else {
                        number.textContent = '';
                        cell.classList.remove('visited');
                    }
                }
            }
            
            // Megold√°s m√°trix friss√≠t√©se
            for (let y = 0; y < boardSize; y++) {
                for (let x = 0; x < boardSize; x++) {
                    const index = y * boardSize + x;
                    const cell = document.getElementById(`sol-cell-${index}`);
                    cell.textContent = solutionMatrix[y][x] || '';
                    
                    // Sz√≠nez√©s a m√°trixban
                    if (solutionMatrix[y][x] === 1) {
                        cell.style.background = 'linear-gradient(45deg, #ff6b6b, #ff8e53)';
                        cell.style.color = 'white';
                    } else if (solutionMatrix[y][x] > 0) {
                        cell.style.background = '#444';
                        cell.style.color = 'white';
                    } else {
                        cell.style.background = '#222';
                        cell.style.color = '#666';
                    }
                }
            }
            
            // L√©p√©ssz√°ml√°l√≥ friss√≠t√©se
            document.getElementById('stepCounter').textContent = 
                `L√©p√©sek: ${visitedCells}/64 (${maxStep}. l√©p√©sn√©l tart)`;
        }

        // T√°bla t√∂rl√©se
        function resetBoard() {
            board = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
            solutionMatrix = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
            updateDisplay();
            document.getElementById('timeStat').textContent = '0s';
            document.getElementById('backtracks').textContent = '0';
            document.getElementById('attempts').textContent = '1';
        }

        // Inicializ√°l√°s oldalbet√∂lt√©skor
        window.onload = init;

        // Input valid√°ci√≥
        document.getElementById('startX').addEventListener('change', function() {
            let val = parseInt(this.value);
            if (val < 1) this.value = 1;
            if (val > 8) this.value = 8;
        });

        document.getElementById('startY').addEventListener('change', function() {
            let val = parseInt(this.value);
            if (val < 1) this.value = 1;
            if (val > 8) this.value = 8;
        });

        // Gyorsgombok
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                solveTour();
            }
            if (e.key === 'Escape') {
                resetBoard();
            }
        });
    </script>
</body>
</html>
